(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-auctions-auctions"],{"21f2":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,"/* pages/auctions/auctions.wxss */",""]),t.exports=e},2489:function(t,e,a){"use strict";a.r(e);var i=a("7b29"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},"24e2":function(t,e,a){"use strict";var i={"yu-datetime-picker":a("cb6b").default},n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",[a("yu-datetime-picker",{ref:"dateTime",attrs:{startYear:"2020",value:t.currentDate,isAll:!1,current:!1},on:{confirm:function(e){arguments[0]=e=t.$handleEvent(e),t.onConfirm.apply(void 0,arguments)}}}),a("van-cell-group",{attrs:{title:"竞价价格设置"}},[a("van-field",{attrs:{value:t.startPrice,label:"车辆起拍价",placeholder:"请输入起拍价",type:"number",border:"false","data-field":"startPrice"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onChange2.apply(void 0,arguments)}}}),a("van-field",{attrs:{value:t.reservePrice,label:"车辆保留价",placeholder:"请输入保留价",type:"digit",border:"false","data-field":"reservePrice"},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.onChange2.apply(void 0,arguments)}}})],1),a("v-uni-view",{staticClass:"uni-list"},[a("v-uni-radio-group",{on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.radioChange.apply(void 0,arguments)}}},t._l(t.stages,(function(e,i){return a("v-uni-label",{key:e.id,staticClass:"uni-list-cell uni-list-cell-pd"},[a("v-uni-view",[a("v-uni-radio",{attrs:{value:e.id,checked:i===t.current}})],1),a("v-uni-view",[t._v(t._s(e.dateString))])],1)})),1)],1),a("van-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.showPopup.apply(void 0,arguments)}}},[t._v("修改所选场次时间")]),a("van-button",{on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.addStage.apply(void 0,arguments)}}},[t._v("增加新的竞价场次")]),a("v-uni-button",{attrs:{type:"primary"},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.saveStage.apply(void 0,arguments)}}},[t._v("确认竞价设置")])],1)},s=[];a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return i}))},"4aa0":function(t,e,a){var i=a("24fb");e=i(!1),e.push([t.i,'.yu-datetime-picker[data-v-58caaeec]{position:relative;z-index:888}.yu-datetime-mask[data-v-58caaeec]{position:fixed;z-index:1000;top:0;right:0;left:0;bottom:0;background:rgba(0,0,0,.4);visibility:hidden;opacity:0;-webkit-transition:all .3s ease;transition:all .3s ease}.yu-datetime-mask.show[data-v-58caaeec]{visibility:visible;opacity:1}.yu-datetime-content[data-v-58caaeec]{position:fixed;bottom:0;left:0;width:100%;-webkit-transition:all .3s ease;transition:all .3s ease;-webkit-transform:translateY(100%);transform:translateY(100%);z-index:3000}.yu-datetime-content.show[data-v-58caaeec]{-webkit-transform:translateY(0);transform:translateY(0)}.yu-datetime-hd[data-v-58caaeec]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-align:center;-webkit-align-items:center;align-items:center;padding:0 %?30?%;height:44px;background-color:#fff;position:relative;text-align:center;font-size:15px;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between}.yu-datetime-btn[data-v-58caaeec]{font-size:14px}.yu-datetime-hd[data-v-58caaeec]:after{content:" ";position:absolute;left:0;bottom:0;right:0;height:1px;border-bottom:1px solid #e5e5e5;color:#e5e5e5;-webkit-transform-origin:0 100%;transform-origin:0 100%;-webkit-transform:scaleY(.5);transform:scaleY(.5)}.yu-datetime-view[data-v-58caaeec]{width:100%;height:200px;overflow:hidden;background-color:#fff;z-index:666}.yu-datetime-view uni-picker-view[data-v-58caaeec]{height:100%}.yu-picker-column[data-v-58caaeec]{-webkit-flex:2;-webkit-box-flex:2;flex:2}.yu-datetime-item[data-v-58caaeec]{text-align:center;width:100%;height:%?88?%;line-height:%?88?%;text-overflow:ellipsis;white-space:nowrap;font-size:%?30?%}',""]),t.exports=e},7524:function(t,e,a){"use strict";(function(t,i){var n=a("ee27");a("7db0"),a("d81d"),a("e25e"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var s=n(a("fc11")),r=a("0595"),o=n(a("cb6b"));t["__wxVueOptions"]={components:{yuDatetimePicker:o.default,"y-RadioGroup":r.RadioGroup,"y-Radio":r.Radio,"y-DatetimePicker":r.DatetimePicker}},t["__wxRoute"]="pages/auctions/auctions";var u=getApp(),c=a("ef22"),l=c.request,d=c.formatTime,f=v(h);function h(t){var e=new Date(parseInt(t));return d(e)}function v(t){return function(e){return e.map((function(e){var a=e.id,i=e.start_time,n=t(i);return{id:a,dateString:n,start_time:i}}))}}function m(){return new Date((new Date).getTime()+864e5)}function p(){return new Date((new Date).getTime()+2592e6)}i({data:{minDate:m(),maxDate:p(),startPrice:null,reservePrice:null,stages:[],currentStage:null,radio:"1",currentDate:"2019-11-10 08:30:00",platNum:null,current:0},computed:{formatter2:function(t,e){return"year"===t?"".concat(e,"年"):"month"===t?"".concat(e,"月"):"day"===t?"".concat(e,"日"):"hour"===t?"".concat(e,"时"):"minute"===t?"".concat(e,"分"):e}},methods:{},radioChange:function(t){console.log("event.detail: ",t.detail);var e=t.detail.value,a=this.stages.find((function(t){return t.id==e}));this.setData({radio:e,currentStage:a}),console.log("this.radio: ",this.radio),console.log("this.currentStage: ",this.currentStage)},onClick:function(t){console.log("onClick/name: ",t.currentTarget.dataset.name);var e=t.currentTarget.dataset.name,a=this.stages.find((function(t){return t.id==e}));this.setData({radio:e,currentStage:a}),console.log("this.radio: ",this.radio),console.log("this.currentStage: ",this.currentStage)},showPopup:function(){var t=this,e=this.currentStage.dateString;console.log("currentDate: ",e),this.setData({currentDate:e},(function(){return t.$refs.dateTime.show()}))},onClose:function(){this.setData({showPop:!1})},onInput:function(t){console.log("onInput(): ",t)},onConfirm:function(t){var e=this;console.log("onConfirm/e: ",t);var a=new Date(t.selectRes).getTime(),i=this.currentStage;i.start_time=a,delete i.dateString,console.log("currentStage: ",i),wx.request({url:u.globalData.host+"/update-stage-start-time",data:i,success:function(t){console.log("update-stage: ",t.data),e.getStages()}})},onCancel:function(){this.setData({currentDate:(new Date).getTime(),minDate:m()}),this.onClose()},saveStage:function(){var t={startPrice:this.data.startPrice,reservePrice:this.data.reservePrice,stageid:this.data.currentStage.id,platNum:this.data.platNum};if(!t.platNum)return console.log("save-stage/data: ",t),0;wx.request({url:u.globalData.host+"/save-stage",data:t,success:function(t){console.log("save-stage: ",t.data),wx.switchTab({url:"../upload/upload"})}})},addStage:function(){var t=this,e={app_token:"yz_auction",start_time:(new Date).getTime()+864e5,state:0,reserve_time:120,auction_time:20,current_auction:{},auctions:[]};l("/add-stage",{newStage:e}).then((function(e){console.log("add-stage: ",e.data),t.getStages()})).catch((function(t){return console.log(t)}))},onChange2:function(t){this.setData((0,s.default)({},t.target.dataset.field,t.detail))},onChange:function(t){console.log(t)},onLoad:function(t){console.log("onLoad options: ",t),this.setData({platNum:t.carid}),this.getStages()},getStages:function(){var t=this;wx.request({url:u.globalData.host+"/get-stages",success:function(e){var a=e.data.stages||[],i=f(a),n=t.currentStage?t.currentStage:i[0]||null;console.log("new stages: ",i),console.log("currentStage: ",n),t.setData({stages:i,currentStage:n})}})}});var g=t["__wxComponents"]["pages/auctions/auctions"];e.default=g}).call(this,a("c8ba"),a("fe07")["Page"])},"765c":function(t,e,a){"use strict";var i,n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("v-uni-view",{staticClass:"yu-datetime-picker"},[a("v-uni-view",{staticClass:"yu-datetime-mask",class:{show:t.showPicker},attrs:{catchtouchmove:"true"},on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e)},click:function(e){arguments[0]=e=t.$handleEvent(e),t.maskClick.apply(void 0,arguments)}}}),a("v-uni-view",{staticClass:"yu-datetime-content",class:{show:t.showPicker}},[a("v-uni-view",{staticClass:"yu-datetime-hd",attrs:{catchtouchmove:"true"},on:{touchmove:function(e){e.stopPropagation(),e.preventDefault(),arguments[0]=e=t.$handleEvent(e)}}},[a("v-uni-view",{staticClass:"yu-datetime-btn",on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.pickerCancel.apply(void 0,arguments)}}},[t._v("取消")]),a("v-uni-view",{staticClass:"yu-datetime-btn",style:{color:t.color},on:{click:function(e){arguments[0]=e=t.$handleEvent(e),t.pickerConfirm.apply(void 0,arguments)}}},[t._v("确定")])],1),a("v-uni-view",{staticClass:"yu-datetime-view"},[t.isAll?a("v-uni-picker-view",{attrs:{"indicator-style":t.itemHeight,value:t.values},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindChange.apply(void 0,arguments)}}},[a("v-uni-picker-view-column",t._l(t.dateObj.years,(function(e,i){return a("v-uni-view",{key:i,staticClass:"yu-datetime-item"},[t._v(t._s(e)+"年")])})),1),a("v-uni-picker-view-column",t._l(t.dateObj.months,(function(e,i){return a("v-uni-view",{key:i,staticClass:"yu-datetime-item"},[t._v(t._s(e)+"月")])})),1),a("v-uni-picker-view-column",t._l(t.dateObj.days,(function(e,i){return a("v-uni-view",{key:i,staticClass:"yu-datetime-item"},[t._v(t._s(e)+"日")])})),1),a("v-uni-picker-view-column",t._l(t.dateObj.hours,(function(e,i){return a("v-uni-view",{key:i,staticClass:"yu-datetime-item"},[t._v(t._s(e)+"时")])})),1),a("v-uni-picker-view-column",t._l(t.dateObj.minutes,(function(e,i){return a("v-uni-view",{key:i,staticClass:"yu-datetime-item"},[t._v(t._s(e)+"分")])})),1),a("v-uni-picker-view-column",t._l(t.dateObj.seconds,(function(e,i){return a("v-uni-view",{key:i,staticClass:"yu-datetime-item"},[t._v(t._s(e)+"秒")])})),1)],1):a("v-uni-picker-view",{attrs:{"indicator-style":t.itemHeight,value:t.dateValues},on:{change:function(e){arguments[0]=e=t.$handleEvent(e),t.bindDateChange.apply(void 0,arguments)}}},[a("v-uni-picker-view-column",{staticClass:"yu-picker-column"},t._l(t.dateObj.dates,(function(e,i){return a("v-uni-view",{key:i,staticClass:"yu-datetime-item"},[t._v(t._s(e))])})),1),a("v-uni-picker-view-column",t._l(t.dateObj.hours,(function(e,i){return a("v-uni-view",{key:i,staticClass:"yu-datetime-item"},[t._v(t._s(e)+"时")])})),1),a("v-uni-picker-view-column",t._l(t.dateObj.minutes,(function(e,i){return a("v-uni-view",{key:i,staticClass:"yu-datetime-item"},[t._v(t._s(e)+"分")])})),1),a("v-uni-picker-view-column",t._l(t.dateObj.seconds,(function(e,i){return a("v-uni-view",{key:i,staticClass:"yu-datetime-item"},[t._v(t._s(e)+"秒")])})),1)],1)],1)],1)],1)},s=[];a.d(e,"b",(function(){return n})),a.d(e,"c",(function(){return s})),a.d(e,"a",(function(){return i}))},"7b29":function(t,e,a){"use strict";a("a15b"),a("a9e3"),a("d3b7"),a("e25e"),a("ac1f"),a("1276"),a("ddb0"),Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var i={name:"yuDatetimePicker",props:{isAll:{type:Boolean,default:function(){return!0}},current:{type:Boolean,default:function(){return!0}},color:{type:String,default:function(){return"#3279e4"}},startYear:{type:[String,Number],default:function(){return(new Date).getFullYear()}},endYear:{type:[String,Number],default:function(){return"2050"}},value:{type:String,default:function(){return""}}},data:function(){for(var t=new Date,e=t.getFullYear(),a=t.getMonth()+1,i=t.getDate(),n=t.getHours(),s=t.getMinutes(),r=t.getSeconds(),o=[],u=[],c=[],l=[],d=[],f=[],h=[],v=a;v<=a+2;v++){var m=v,p=e;13==v&&(p+=1),v>=13&&(m-=12);var g=new Date(p,m,0).getDate();if(v==a)for(var y=i;y<=g;y++){var w=m,b=y;m<10&&(w="0"+w),y<10&&(b="0"+b);var k=e+"-"+w+"-"+b;o.push(k)}else for(var _=1;_<=g;_++){var D=m,x=_;m<10&&(D="0"+D),_<10&&(x="0"+x);var C=p+"-"+D+"-"+x;o.push(C)}}for(var N=parseInt(this.startYear);N<=this.endYear;N++)c.push(N);for(var S=1;S<=12;S++){var j=S;j=S<10?"0"+j:""+j,u.push(j)}if(this.value)for(var P=this.value.split(" "),O=P[0].split("-"),A=new Date(O[0],O[1],0).getDate(),$=1;$<=A;$++){var Y=$;Y=$<10?"0"+Y:""+Y,l.push(Y)}else for(var T=new Date(e,a,0).getDate(),R=1;R<=T;R++){var E=R;E=R<10?"0"+E:""+E,l.push(E)}for(var I=0;I<24;I++){var M=I;M=I<10?"0"+M:""+M,d.push(M)}for(var z=0;z<60;z++){var V=z;V=z<10?"0"+V:""+V,f.push(V)}for(var q=0;q<60;q++){var B=q;B=q<10?"0"+B:""+B,h.push(B)}var F={dates:o,years:c,months:u,days:l,hours:d,minutes:f,seconds:h};return{year:e,month:a,day:i,hour:n,minute:s,second:r,dateObj:F,itemHeight:"height: ".concat(uni.upx2px(88),"px;"),values:[0,0,0,0,0,0],selectArr:[],selectRes:"",showPicker:!1,dateValues:[0,0,0,0]}},mounted:function(){this.initDate(),!this.value&&this.current&&this.showCurrent()},methods:{initDate:function(){var t=this;if(t.value){var e=[0,0,0,0,0,0],a=[0,0,0,0],i=t.value,n=i.split(" "),s=n[0].split("-"),r=n[1].split(":");if(t.isAll)e[0]=s[0]-t.startYear>0?s[0]-t.startYear:0,e[1]=parseInt(s[1])-1,e[2]=parseInt(s[2])-1,e[3]=parseInt(r[0]),e[4]=parseInt(r[1]),e[5]=parseInt(r[2]),t.$nextTick((function(){t.values=e})),s[0]-t.startYear>=0?(t.selectArr=[s[0],s[1],s[2],r[0],r[1],r[2]],t.selectRes=t.value):(t.selectArr=[t.formatNum(t.startYear),s[1],s[2],r[0],r[1],r[2]],t.selectRes="".concat(this.formatNum(t.startYear)+"-"+s[1]+"-"+s[2]+" "+r[0]+":"+r[1]+":"+r[2]));else{var o=s.join(""),u=t.formatNum(t.year)+t.formatNum(t.month)+t.formatNum(t.day)+"";if(o<u)a[0]=0,t.selectArr=[t.formatNum(t.year),t.formatNum(t.month),t.formatNum(t.day),r[0],r[1],r[2]],t.selectRes="".concat(t.formatNum(t.year)+"-"+t.formatNum(t.month)+"-"+t.formatNum(t.day)+" "+r[0]+":"+r[1]+":"+r[2]);else{var c=t.formatNum(t.year)+"-"+t.formatNum(t.month)+"-"+t.formatNum(t.day),l=t.getBetweenDateStr(c,n[0]);a[0]=l.length-1,t.selectArr=[s[0],s[1],s[2],r[0],r[1],r[2]],t.selectRes=t.value}a[1]=parseInt(r[0]),a[2]=parseInt(r[1]),a[3]=parseInt(r[2]),t.$nextTick((function(){t.dateValues=a}))}}else t.isAll?(t.selectArr=[t.formatNum(t.startYear),"01","01","00","00","00"],t.selectRes="".concat(t.formatNum(t.startYear)+"-01-01 00:00:00")):(t.selectArr=[t.formatNum(t.year),t.formatNum(t.month),"01","00","00","00"],t.selectRes="".concat(t.formatNum(t.year)+"-"+t.formatNum(t.month)+"-01 00:00:00"))},showCurrent:function(){var t=this,e=[0,0,0,0,0,0],a=[0,0,0,0];this.selectArr=[this.formatNum(this.year),this.formatNum(this.month),this.formatNum(this.day),this.formatNum(this.hour),this.formatNum(this.minute),this.formatNum(this.second)],this.selectRes="".concat(this.formatNum(this.year)+"-"+this.formatNum(this.month)+"-"+this.formatNum(this.day)+" "+this.formatNum(this.hour)+":"+this.formatNum(this.minute)+":"+this.formatNum(this.second)),this.isAll?(e[0]=this.year-this.startYear,e[1]=this.month-1,e[2]=this.day-1,e[3]=this.hour,e[4]=this.minute,e[5]=this.second,this.$nextTick((function(){t.values=e}))):(a[1]=this.hour,a[2]=this.minute,a[3]=this.second,this.$nextTick((function(){t.dateValues=a})))},initDayArr:function(t,e){for(var a=new Date(t,e,0).getDate(),i=[],n=1;n<=a;n++)n<10?n="0"+n:n+="",i.push(n);return i},formatNum:function(t){return t<10?"0"+t:t+""},maskClick:function(){this.showPicker=!1},show:function(){this.showPicker=!0},hide:function(){this.showPicker=!1},pickerCancel:function(){this.$emit("cancel",{selectArr:this.selectArr}),this.showPicker=!1},pickerConfirm:function(t){this.$emit("confirm",{selectArr:this.selectArr,selectRes:this.selectRes}),this.showPicker=!1},bindChange:function(t){var e=this,a=t.detail.value,i="",n="",s="",r="",o="",u="",c=this.selectArr,l=[];i=this.dateObj.years[a[0]],n=this.dateObj.months[a[1]],s=this.dateObj.days[a[2]],r=this.dateObj.hours[a[3]],o=this.dateObj.minutes[a[4]],u=this.dateObj.seconds[a[5]],i!=c[0]&&(l=this.initDayArr(i,n),this.dateObj.days=l),n!=c[1]&&(l=this.initDayArr(i,n),this.dateObj.days=l),this.selectArr=[i,n,s,r,o,u],this.selectRes="".concat(i+"-"+n+"-"+s+" "+r+":"+o+":"+u),this.$nextTick((function(){e.values=a}))},bindDateChange:function(t){var e=this,a=t.detail.value,i="",n=[],s="",r="",o="";this.selectArr;i=this.dateObj.dates[a[0]],n=i.split("-"),s=this.dateObj.hours[a[1]],r=this.dateObj.minutes[a[2]],o=this.dateObj.seconds[a[3]],this.selectArr=[n[0],n[1],n[2],s,r,o],this.selectRes="".concat(n[0]+"-"+n[1]+"-"+n[2]+" "+s+":"+r+":"+o),this.$nextTick((function(){e.dateValues=a}))},getBetweenDateStr:function(t,e){var a=[],i=t.split("-"),n=e.split("-"),s=new Date,r=new Array,o=0;s.setDate(i[2]),s.setMonth(i[1]-1),s.setFullYear(i[0]),a.push(t);while(0==o){var u=s.getTime()+864e5;s.setTime(u),r[2]=s.getDate(),r[1]=s.getMonth()+1,r[0]=s.getFullYear(),1==String(r[1]).length&&(r[1]="0"+r[1]),1==String(r[2]).length&&(r[2]="0"+r[2]),a.push(r[0]+"-"+r[1]+"-"+r[2]),r[0]==n[0]&&r[1]==n[1]&&r[2]==n[2]&&(o=1)}return a}}};e.default=i},"84b9":function(t,e,a){var i=a("21f2");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("715fa34c",i,!0,{sourceMap:!1,shadowMode:!1})},"93e9":function(t,e,a){"use strict";a.r(e);var i=a("7524"),n=a.n(i);for(var s in i)"default"!==s&&function(t){a.d(e,t,(function(){return i[t]}))}(s);e["default"]=n.a},ad4d:function(t,e,a){var i=a("4aa0");"string"===typeof i&&(i=[[t.i,i,""]]),i.locals&&(t.exports=i.locals);var n=a("4f06").default;n("72868978",i,!0,{sourceMap:!1,shadowMode:!1})},cb6b:function(t,e,a){"use strict";a.r(e);var i=a("765c"),n=a("2489");for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("ec73");var r,o=a("f0c5"),u=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"58caaeec",null,!1,i["a"],r);e["default"]=u.exports},ccbf:function(t,e,a){"use strict";var i=a("84b9"),n=a.n(i);n.a},ec73:function(t,e,a){"use strict";var i=a("ad4d"),n=a.n(i);n.a},f45e:function(t,e,a){"use strict";a.r(e);var i=a("24e2"),n=a("93e9");for(var s in n)"default"!==s&&function(t){a.d(e,t,(function(){return n[t]}))}(s);a("ccbf");var r,o=a("f0c5"),u=Object(o["a"])(n["default"],i["b"],i["c"],!1,null,"cad3f7ee",null,!1,i["a"],r);e["default"]=u.exports}}]);