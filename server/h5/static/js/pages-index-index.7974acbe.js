(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-index"],{"0bb7":function(e,t,a){"use strict";var n=a("6991"),r=a.n(n);r.a},"21ce":function(e,t,a){"use strict";a.r(t);var n=a("7d79"),r=a.n(n);for(var i in n)"default"!==i&&function(e){a.d(t,e,(function(){return n[e]}))}(i);t["default"]=r.a},6991:function(e,t,a){var n=a("ffa7");"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var r=a("4f06").default;r("7013e53a",n,!0,{sourceMap:!1,shadowMode:!1})},"7d79":function(e,t,a){"use strict";(function(e){var n=a("ee27");Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var r=n(a("fc11"));a("96cf");var i=n(a("c964")),o=(n(a("f31f")),getApp().globalData,a("c3f6")),s=o.setCircleList,c=o.setAwardList,l=o.request,u=o.startGame,d=o.webSocketConnect,f=o.validMobile,h={data:function(){return{circleList:[],awardList:[],colorCircleFirst:"#FFDF2F",colorCircleSecond:"#FE4D32",colorAwardDefault:"#F5F0FC",colorAwardSelect:"#ffe400",indexSelect:0,isRunning:!1,imageAward:["/static/images/1.jpg","/static/images/2.jpg","/static/images/3.jpg","/static/images/4.jpg","/static/images/5.jpg","/static/images/6.jpg","/static/images/7.jpg","/static/images/8.jpg"],times:"200",sid:null,awardName:["挡泥板","捷达雨伞","车内沾灰神器","燃油添加剂","玻璃水","设备换油","车内沾灰神器","捷达精品车模"],nickName:"",mobile:"",plateNum:"云A-",showInput:!1,notice:"",max:5,errMobile:"",key:null}},components:{},props:{},onLoad:function(){var t=(0,i.default)(regeneratorRuntime.mark((function t(){var a,n,r,i,o;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l("login");case 2:a=t.sent,e.log("login: ",a),n=a.code,a.msg,r=a.sid,i=a.nickName,o=a.max,n&&this.setData({sid:r,nickName:i,max:o}),d(this),s(this),c(this);case 9:case"end":return t.stop()}}),t,this)})));function a(){return t.apply(this,arguments)}return a}(),methods:{onChange:function(e){this.setData((0,r.default)({},"".concat(e.target.dataset.id),e.detail)),this.setData({errMobile:f(this.mobile)})},commitInfo:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var n,r,i,o;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(!t.errMobile){a.next=2;break}return a.abrupt("return",0);case 2:return n={nickName:t.nickName||"谊众客户",mobile:t.mobile,plateNum:t.plateNum},a.next=5,l("login",n);case 5:r=a.sent,e.log("login: ",r),i=r.code,r.nickName,r.mobile,o=r.sid,o&&uni.setStorageSync("sid",o),i&&t.setData({showInput:!1,sid:o});case 10:case"end":return a.stop()}}),a)})))()},startGame:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:e.log("this.sid: ",t.sid),t.sid?t.startGame2():t.showInput=!0;case 2:case"end":return a.stop()}}),a)})))()},startGame2:function(){var t=this;return(0,i.default)(regeneratorRuntime.mark((function a(){var n,r,i,o,s,c;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(n=t,!t.isRunning){a.next=3;break}return a.abrupt("return",0);case 3:return t.setData({isRunning:!0}),a.next=6,l("getSelect");case 6:r=a.sent,e.log("getSelect: ",r),i=r.code,o=r.key,s=r.finalSelect,c=r.msg,i&&o?u(t,o,s):wx.showModal({title:"提示",content:c,showCancel:!1,success:function(e){return n.setData({isRunning:!1,max:0})}});case 10:case"end":return a.stop()}}),a)})))()}}};t.default=h}).call(this,a("5a52")["default"])},"8e70":function(e,t,a){"use strict";var n,r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("v-uni-view",[a("van-divider",{attrs:{contentPosition:"center"}},[e._v("欢迎"+e._s(e.nickName)+",您有"+e._s(e.max)+"次抽奖机会！")]),e.showInput?a("van-cell-group",{attrs:{title:"请输入领奖信息："}},[a("van-field",{attrs:{value:e.mobile,type:"digit",maxlength:"20",label:"手机号：","data-id":"mobile",placeholder:"填错不能兑奖","error-message":e.errMobile},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onChange.apply(void 0,arguments)}}},[a("van-button",{attrs:{slot:"button",size:"small",type:"primary"},on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.commitInfo.apply(void 0,arguments)}},slot:"button"},[e._v("确认信息正确")])],1),a("van-field",{attrs:{value:e.plateNum,maxlength:"10",label:"车牌号：","data-id":"plateNum",placeholder:"请填写车牌照号码"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onChange.apply(void 0,arguments)}}}),a("van-field",{attrs:{value:e.nickName,maxlength:"10",label:"昵 称：","data-id":"nickName",placeholder:"可不填"},on:{change:function(t){arguments[0]=t=e.$handleEvent(t),e.onChange.apply(void 0,arguments)}}})],1):e._e(),a("v-uni-view",{staticClass:"container-out"},[e._l(e.circleList,(function(t,n){return a("v-uni-view",{key:n,staticClass:"circle",style:"top:"+t.topCircle+"rpx;left:"+t.leftCircle+"rpx;background-color: "+(n%2==0?e.colorCircleFirst:e.colorCircleSecond)+";"})})),a("v-uni-view",{staticClass:"container-in"},[e._l(e.awardList,(function(t,n){return a("v-uni-view",{key:n,staticClass:"content-out",style:"top:"+t.topAward+"rpx;left:"+t.leftAward+"rpx;background-color: "+(n==e.indexSelect?e.colorAwardSelect:e.colorAwardDefault)+";"},[a("v-uni-image",{staticClass:"award-image",attrs:{src:t.imageAward}})],1)})),a("v-uni-view",{staticClass:"start-btn",style:"background-color:"+(e.isRunning?"#e7930a":"#ffe400"),on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.startGame.apply(void 0,arguments)}}},[e._v("开始")])],2)],2),a("van-divider",{attrs:{contentPosition:"center"}},[e._v("获奖通知")]),a("van-notice-bar",{attrs:{wrapable:!0,scrollable:"false","left-icon":"volume",text:e.notice}})],1)},i=[];a.d(t,"b",(function(){return r})),a.d(t,"c",(function(){return i})),a.d(t,"a",(function(){return n}))},eec7:function(e,t,a){"use strict";a.r(t);var n=a("8e70"),r=a("21ce");for(var i in r)"default"!==i&&function(e){a.d(t,e,(function(){return r[e]}))}(i);a("0bb7");var o,s=a("f0c5"),c=Object(s["a"])(r["default"],n["b"],n["c"],!1,null,"38bffbdf",null,!1,n["a"],o);t["default"]=c.exports},f31f:function(e,t,a){"use strict";(function(e){a("c975"),a("13d5"),a("4d63"),a("ac1f"),a("25f0"),a("466d"),a("5319"),a("1276"),Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var n=/^<([-A-Za-z0-9_]+)((?:\s+[a-zA-Z_:][-a-zA-Z0-9_:.]*(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)>/,r=/^<\/([-A-Za-z0-9_]+)[^>]*>/,i=/([a-zA-Z_:][-a-zA-Z0-9_:.]*)(?:\s*=\s*(?:(?:"((?:\\.|[^"])*)")|(?:'((?:\\.|[^'])*)')|([^>\s]+)))?/g,o=h("area,base,basefont,br,col,frame,hr,img,input,link,meta,param,embed,command,keygen,source,track,wbr"),s=h("a,address,article,applet,aside,audio,blockquote,button,canvas,center,dd,del,dir,div,dl,dt,fieldset,figcaption,figure,footer,form,frameset,h1,h2,h3,h4,h5,h6,header,hgroup,hr,iframe,isindex,li,map,menu,noframes,noscript,object,ol,output,p,pre,section,script,table,tbody,td,tfoot,th,thead,tr,ul,video"),c=h("abbr,acronym,applet,b,basefont,bdo,big,br,button,cite,code,del,dfn,em,font,i,iframe,img,input,ins,kbd,label,map,object,q,s,samp,script,select,small,span,strike,strong,sub,sup,textarea,tt,u,var"),l=h("colgroup,dd,dt,li,options,p,td,tfoot,th,thead,tr"),u=h("checked,compact,declare,defer,disabled,ismap,multiple,nohref,noresize,noshade,nowrap,readonly,selected"),d=h("script,style");function f(e,t){var a,f,h,p=[],m=e;p.last=function(){return this[this.length-1]};while(e){if(f=!0,p.last()&&d[p.last()])e=e.replace(new RegExp("([\\s\\S]*?)</"+p.last()+"[^>]*>"),(function(e,a){return a=a.replace(/<!--([\s\S]*?)-->|<!\[CDATA\[([\s\S]*?)]]>/g,"$1$2"),t.chars&&t.chars(a),""})),v("",p.last());else if(0==e.indexOf("\x3c!--")?(a=e.indexOf("--\x3e"),a>=0&&(t.comment&&t.comment(e.substring(4,a)),e=e.substring(a+3),f=!1)):0==e.indexOf("</")?(h=e.match(r),h&&(e=e.substring(h[0].length),h[0].replace(r,v),f=!1)):0==e.indexOf("<")&&(h=e.match(n),h&&(e=e.substring(h[0].length),h[0].replace(n,g),f=!1)),f){a=e.indexOf("<");var b=a<0?e:e.substring(0,a);e=a<0?"":e.substring(a),t.chars&&t.chars(b)}if(e==m)throw"Parse Error: "+e;m=e}function g(e,a,n,r){if(a=a.toLowerCase(),s[a])while(p.last()&&c[p.last()])v("",p.last());if(l[a]&&p.last()==a&&v("",a),r=o[a]||!!r,r||p.push(a),t.start){var d=[];n.replace(i,(function(e,t){var a=arguments[2]?arguments[2]:arguments[3]?arguments[3]:arguments[4]?arguments[4]:u[t]?t:"";d.push({name:t,value:a,escaped:a.replace(/(^|[^\\])"/g,'$1\\"')})})),t.start&&t.start(a,d,r)}}function v(e,a){if(a){for(n=p.length-1;n>=0;n--)if(p[n]==a)break}else var n=0;if(n>=0){for(var r=p.length-1;r>=n;r--)t.end&&t.end(p[r]);p.length=n}}v()}function h(e){for(var t={},a=e.split(","),n=0;n<a.length;n++)t[a[n]]=!0;return t}function p(e){return e.replace(/<\?xml.*\?>\n/,"").replace(/<!doctype.*>\n/,"").replace(/<!DOCTYPE.*>\n/,"")}function m(e){return e.reduce((function(e,t){var a=t.value,n=t.name;return e[n]?e[n]=e[n]+" "+a:e[n]=a,e}),{})}function b(t){t=p(t);var a=[],n={node:"root",children:[]};return f(t,{start:function(e,t,r){var i={name:e};if(0!==t.length&&(i.attrs=m(t)),r){var o=a[0]||n;o.children||(o.children=[]),o.children.push(i)}else a.unshift(i)},end:function(t){var r=a.shift();if(r.name!==t&&e.error("invalid state: mismatch end tag"),0===a.length)n.children.push(r);else{var i=a[0];i.children||(i.children=[]),i.children.push(r)}},chars:function(e){var t={type:"text",text:e};if(0===a.length)n.children.push(t);else{var r=a[0];r.children||(r.children=[]),r.children.push(t)}},comment:function(e){var t={node:"comment",text:e},n=a[0];n.children||(n.children=[]),n.children.push(t)}}),n.children}var g=b;t.default=g}).call(this,a("5a52")["default"])},ffa7:function(e,t,a){var n=a("24fb");t=n(!1),t.push([e.i,"/**index.wxss**/.container-out[data-v-38bffbdf]{height:%?600?%;width:%?650?%;background-color:#b136b9;margin:%?100?% auto;border-radius:%?40?%;-webkit-box-shadow:0 10px 0 #871a8e;box-shadow:0 10px 0 #871a8e;position:relative}.container-in[data-v-38bffbdf]{width:%?580?%;height:%?530?%;background-color:#871a8e;border-radius:%?40?%;position:absolute;left:0;right:0;top:0;bottom:0;margin:auto}\n\n/**小圆球\nbox-shadow: inset 3px 3px 3px #fff2af;*/.circle[data-v-38bffbdf]{position:absolute;display:block;border-radius:50%;height:%?20?%;width:%?20?%}.content-out[data-v-38bffbdf]{position:absolute;height:%?150?%;width:%?166.6666?%;background-color:#f5f0fc;border-radius:%?15?%;-webkit-box-shadow:0 5px 0 #d87fde;box-shadow:0 5px 0 #d87fde}\n\n/**居中 加粗*/.start-btn[data-v-38bffbdf]{position:absolute;margin:auto;top:0;left:0;bottom:0;right:0;border-radius:%?15?%;height:%?150?%;width:%?166.6666?%;background-color:#ffe400;-webkit-box-shadow:0 5px 0 #e7930a;box-shadow:0 5px 0 #e7930a;color:#f6251e;text-align:center;font-size:%?55?%;font-weight:bolder;line-height:%?150?%}.award-image[data-v-38bffbdf]{position:absolute;margin:auto;top:0;left:0;bottom:0;right:0;height:%?140?%;width:%?130?%}",""]),e.exports=t}}]);