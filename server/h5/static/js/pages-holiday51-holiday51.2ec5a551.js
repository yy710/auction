(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-holiday51-holiday51"],{"84ff":function(e,n,t){"use strict";t.r(n);var a=t("b9f3"),i=t.n(a);for(var o in a)"default"!==o&&function(e){t.d(n,e,(function(){return a[e]}))}(o);n["default"]=i.a},b9f3:function(e,n,t){"use strict";(function(e){var a=t("ee27");t("e25e"),Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0,t("96cf");var i=a(t("c964")),o=a(t("ec54")),r=a(t("b5a9")),c=(getApp().globalData,t("c3f6")),l=c.request51,s=(c.webSocketConnect,c.validMobile,{components:{dial:o.default,login:r.default},data:function(){return{sid:null,nickName:"谊众客户",max:1,notice:"",finalSelect:-1,key:null}},onLoad:function(){var n=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var a,i,o,r,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,l("login");case 2:a=t.sent,e.log("login: ",a),i=a.code,a.msg,o=a.sid,r=a.nickName,c=a.max,i&&n.setData({sid:o,nickName:r,max:c});case 6:case"end":return t.stop()}}),t)})))()},methods:{onLogin:function(e){var n=e.code,t=e.nickName,a=(e.mobile,e.sid),i=e.max;a&&n&&(uni.setStorageSync("sid",a),this.setData({sid:a,max:i,nickName:t}))},onStartGame:function(){var n=this;return(0,i.default)(regeneratorRuntime.mark((function t(){var a,i,o,r,c,s,u;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=n,i=n.sid||uni.getStorageSync("sid"),!i){t.next=11;break}return t.next=5,l("getSelect");case 5:o=t.sent,e.log("getSelect: ",o),r=o.code,c=o.key,s=o.finalSelect,u=o.msg,!r&&c?(n.key=c,n.$refs.dial.run(parseInt(s))):wx.showModal({title:"提示",content:u,showCancel:!1,success:function(e){a.setData({max:0}),2==r&&n.$refs.login.show()}}),t.next=12;break;case 11:n.$refs.login.show();case 12:case"end":return t.stop()}}),t)})))()},onGameOver:function(n){var t=this;e.log("game over!"),l("saveAward",{finalSelect:n,key:this.key,appToken:"holiday51"}).then((function(n){e.log("saveAward: ",n);var a=n.code,i=n.max,o=n.award;t.setData({max:i}),wx.showModal({title:"抽奖结果",content:a?"恭喜您获得礼品: "+o+" !":"抽奖失败!",showCancel:!1,success:function(e){e.confirm}})})).catch((function(n){return e.log(n)}))}}});n.default=s}).call(this,t("5a52")["default"])},d3a9:function(e,n,t){"use strict";t.r(n);var a=t("f6b7"),i=t("84ff");for(var o in i)"default"!==o&&function(e){t.d(n,e,(function(){return i[e]}))}(o);var r,c=t("f0c5"),l=Object(c["a"])(i["default"],a["b"],a["c"],!1,null,"bee6e948",null,!1,a["a"],r);n["default"]=l.exports},f6b7:function(e,n,t){"use strict";var a={login:t("b5a9").default,dial:t("ec54").default},i=function(){var e=this,n=e.$createElement,t=e._self._c||n;return t("v-uni-view",[t("van-divider",{attrs:{contentPosition:"center"}},[e._v("欢迎"+e._s(e.nickName)+",您有"+e._s(e.max)+"次抽奖机会！")]),t("login",{ref:"login",on:{login:function(n){arguments[0]=n=e.$handleEvent(n),e.onLogin.apply(void 0,arguments)}}}),t("dial",{ref:"dial",on:{startGame:function(n){arguments[0]=n=e.$handleEvent(n),e.onStartGame.apply(void 0,arguments)},gameOver:function(n){arguments[0]=n=e.$handleEvent(n),e.onGameOver.apply(void 0,arguments)}}}),t("van-divider",{attrs:{contentPosition:"center"}},[e._v("获奖通知")]),t("van-notice-bar",{attrs:{wrapable:!0,scrollable:"false","left-icon":"volume",text:e.notice}})],1)},o=[];t.d(n,"b",(function(){return i})),t.d(n,"c",(function(){return o})),t.d(n,"a",(function(){return a}))}}]);